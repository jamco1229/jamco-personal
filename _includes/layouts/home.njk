---
layout: base
permalink: "/"
---

<div class="home-intro">
  {{ content | safe }}
</div>
<h1 class='projects-heading'>Projects</h1>
<div class='container'>
{% set entries = collections.all | getPagesByPaths(entries) if entries else collections.projects %}

{# Sort the entries by the 'sort' field in descending order #}
{% set sortedEntries = entries | sort('entry.data.sort') %}

{# For each of the entries #}
{% for entry in sortedEntries %}

  {# Set the defaults #}
  {% set image = false %}
  {% set width = false %}
  {% set height = false %}
  {% set blockClasses = 'md' %}

  {# If the entry has media #}
  {% if entry.data.media %}
    {# Get the first featured image block #}
    {% set block = entry.data.media | getFeaturedImage %}
    {% if block %}
      {% set blockClasses = block.size if block.size %}
      {% set image = block.filename | urlencode %}
      {% set width = block.width if block.width else false %}
      {% set height = block.height if block.height else false %}
    {% endif %}
  {% endif %}

  {# If there is an image we can use #}
  {% if image %}
    <a class="home-block {{ blockClasses }}" href="{{ entry.url }}">
      <article>
        <img
          loading="lazy"
          src="/media/{{ image }}"
          alt=""
          {% if width %}width="{{ width }}"{% endif %}
          {% if height %}height="{{ height }}"{% endif %}
        >
        <h2 class="home-block-title">{{ entry.data.title | safe }}</h2>
        <p class='home-block-role'>{{ entry.data.role | safe}}</p>
        <p class='home-block-completion-date'>{{ entry.data.completionDate | safe}}</p>
        <p class='home-block-platform'>{{ entry.data.readTime | safe}}</p>
        <p class='home-block-description'>{{ entry.data.description | safe}}</p>
      </article>
    </a>
  {% endif %}
{% endfor %}
</div>